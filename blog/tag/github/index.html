<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>Citellus - github</title>
        <link rel="stylesheet" href="https://citellusorg.github.io/theme/css/main.css" />
        <link href="https://citellusorg.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Citellus Atom Feed" />
        <link href="https://citellusorg.github.io/feeds/all.rss" type="application/rss+xml" rel="alternate" title="Citellus RSS Feed" />

        <!--[if IE]>
            <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="https://citellusorg.github.io/">Citellus  <strong>Automate your troubleshooting</strong></a></h1>
                <nav><ul>
    
                        <li><a href="https://citellusorg.github.io/">About</a></li>
    
                        <li><a href="https://citellusorg.github.io/citellus/">Citellus</a></li>
    
                        <li><a href="https://citellusorg.github.io/contributing/">Contributing</a></li>
    
                        <li><a href="https://citellusorg.github.io/magui/">Magui</a></li>
    
                        <li><a href="https://citellusorg.github.io/timeline/">Timeline</a></li>
                    <li><a href="https://citellusorg.github.io/blog/category/blog/">blog</a></li>
                </ul>
                </nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="https://citellusorg.github.io/blog/2020/08/18/github-action/">Citellus GitHub&nbsp;Action</a></h1>
<footer class="post-info">
        <span>Tue 18 August 2020</span>
<span>| tags: <a href="https://citellusorg.github.io/blog/tag/citellus/">citellus</a><a href="https://citellusorg.github.io/blog/tag/magui/">magui</a><a href="https://citellusorg.github.io/blog/tag/github/">github</a></span>
</footer><!-- /.post-info --><h2 id="github-actions">GitHub Actions<a class="headerlink" href="#github-actions" title="Permanent link">&para;</a></h2>
<p>Github has recently included the ability to define &#8216;actions&#8217; or &#8216;workflows&#8217; to execute on the&nbsp;repositories.</p>
<p>The&nbsp;pros:</p>
<ul>
<li>It&#8217;s defined in a yaml inside the&nbsp;repository</li>
<li>Allows defining secrets via the web <span class="caps">UI</span> for tokens,&nbsp;etc</li>
<li>Extensive marketplace of actions and easily&nbsp;extensible</li>
</ul>
<h2 id="citellus-and-gha">Citellus and <span class="caps">GHA</span><a class="headerlink" href="#citellus-and-gha" title="Permanent link">&para;</a></h2>
<p>We&#8217;ve moved some of the <span class="caps">CI</span> in the repository from Travis to <span class="caps">GHA</span> to take advantage of this approach so now (check <code>.github/</code> folder):</p>
<ul>
<li>Package version upload (when a new release is created, package is uploaded to <code>pypi</code>)</li>
<li>Tagging of relevant versions (when <code>X.Y.Z</code> is released, new tags are added for <code>X.Y</code> and <code>X</code> pointing to the same&nbsp;files)</li>
<li>Python unit&nbsp;testing</li>
<li><code>pre-commit</code> validation</li>
<li>Broken link checker for&nbsp;documents</li>
<li>Labeling of&nbsp;issues</li>
<li>Closing old issues/<span class="caps">PR</span>&#8217;s when not&nbsp;updated</li>
<li>Generation of website for <a href="https://citellusorg.github.io">https://citellusorg.github.io</a></li>
<li>Managing of dependencies for actions,&nbsp;packages</li>
<li>etc</li>
</ul>
<h3 id="the-path-to-citellus-github-action">The path to Citellus Github Action<a class="headerlink" href="#the-path-to-citellus-github-action" title="Permanent link">&para;</a></h3>
<p>With the recent changes in Citellus <a href="https://citellusorg.github.io/blog/tag/whatsnew/">What&#8217;s new</a> like the extra plugin tree and configuration path, we were already on the path to get more Citellus&nbsp;automation&#8230;.</p>
<p><a href="https://github.com/citellusorg/gh-action-citellus">https://github.com/citellusorg/gh-action-citellus</a> has been created for that&nbsp;purpose.</p>
<p>It defines via the <code>action.yml</code> the steps to setup Citellus and via the <code>entrypoint.sh</code> install dependencies, sets up permissions and then runs Citellus against the defined folder to store the output and serve the report via GitHub pages web&nbsp;server.</p>
<p>You can check one repository using it at <a href="https://github.com/iranzo/ipival/">https://github.com/iranzo/ipival/</a> and see the html output at <a href="https://iranzo.github.io/ipival/">https://iranzo.github.io/ipival/</a>.</p>
<p>As it&#8217;s always easier to learn by an example, check those&nbsp;files:</p>
<ul>
<li><code>.citellus.conf</code> at <a href="https://github.com/iranzo/ipival/blob/master/.citellus.conf">https://github.com/iranzo/ipival/blob/master/.citellus.conf</a> which defines the <code>web</code> output, <code>excludes</code> to rule out all the <code>citellusclient</code> plugins, defines <code>title</code> for the report and defines an <code>extraplugintree</code> in the subfolder of this&nbsp;repository.</li>
<li><code>.github/workflows/citellus.yml</code> at <a href="https://github.com/iranzo/ipival/blob/master/.github/workflows/citellus.yml">https://github.com/iranzo/ipival/blob/master/.github/workflows/citellus.yml</a> which defines to run the action on each push to master branch, and also via daily cron execution, defining the following properties for the script (that will be used by the prior commented <code>entrypoint.sh</code>):</li>
</ul>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="p p-Indicator">-</span> <span class="nt">uses</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">citellusorg/gh-action-citellus@1.0</span>
    <span class="l l-Scalar l-Scalar-Plain">env</span><span class="p p-Indicator">:</span>
    <span class="nt">GITHUB_TOKEN</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">${{secrets.GITHUB_TOKEN}}</span>
    <span class="nt">SOSREPORT</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">test</span>
    <span class="nt">CONFIGPATH</span><span class="p">:</span> <span class="s">&quot;./&quot;</span>
</code></pre></div>
</td></tr></table>
<p>Enjoy!</p>                </article>
<p class="paginator">
    Page 1 / 1
</p>
            </aside><!-- /#featured -->
            </ol><!-- /#posts-list -->
            </section><!-- /#content -->
        <section id="extras" class="body">
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="https://citellusorg.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>
                            <li><a href="https://citellusorg.github.io/feeds/all.rss" type="application/rss+xml" rel="alternate">rss feed</a></li>

                            <li><a href="https://github.com/citellusorg">github</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <p>Powered by <a href="http://getpelican.com/">Pelican</a>. Theme <a href="https://github.com/blueicefield/pelican-blueidea/">blueidea</a>, inspired by the default theme.</p>
        </footer><!-- /#contentinfo -->

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-81705-14']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
</body>
</html>